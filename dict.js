const input=document.getElementById("search"),$submit=document.getElementById("submit-btn"),$match=document.getElementById("match-list"),$display=document.getElementById("display"),$filter=async e=>{const n=await fetch("https://malayalamozhi.github.io/mikuti/mal.json");let t=(await n.json()).filter(n=>{const t=new RegExp(`^${e}`,"gi");return n.en.match(t)||n.ml.match(t)||n.other.match(t)});e.length<=1&&(t=[],$match.style.display="none",$display.innerHTML="",$display.style.display="none",window.localStorage.clear()),outputMatches(t)},outputMatches=e=>{if(e.length>1){const n=e.map(e=>`<li class="filter-words">${e.en} <span>${e.ml}</span> ${e.other} </li>\n      `).join("");$match.innerHTML=n,$match.style.display="block"}};let url="https://malayalamozhi.github.io/mikuti/mal.json";function findWords(){fetch(url).then(e=>e.json()).then(e=>{e.filter(function(e){if(e.en==input.value){$display.style.display="block";var n=document.createElement("h3"),t=document.createElement("p"),i=document.createElement("div"),a=document.createElement("p");if(i.appendChild(a),0!=e.other.length)(p=document.createElement("p")).innerHTML="<span>related</span> "+e.other,i.appendChild(p);if(0!=e.otheren.length)(d=document.createElement("p")).innerHTML="<span>related english words</span> "+e.otheren,i.appendChild(d);if(0!=e.example.length)(s=document.createElement("p")).innerHTML="<span>example</span> "+e.example,i.appendChild(s);if(0!=e.san.length)(r=document.createElement("p")).innerHTML="<span>sanskritised malayalam</span> "+e.san,i.appendChild(r);function l(){"prefix"===e.type?n.innerHTML=e.en+"-":"suffix"===e.type&&(n.innerHTML="-"+e.en)}n.innerHTML=e.en,t.innerHTML=e.type,a.innerHTML="<span>meaning</span> "+e.ml,i.classList.add("pos"),$display.appendChild(n),$display.appendChild(t),$display.appendChild(i),l()}else if(e.ml==input.value){$display.style.display="block";var p,d,s,r;n=document.createElement("h3"),t=document.createElement("p"),i=document.createElement("div"),a=document.createElement("p");if(i.appendChild(a),0!=e.other.length)(p=document.createElement("p")).innerHTML="<span>ചാര്‍ച്ചയുള്ളവ</span> "+e.other,i.appendChild(p);if(0!=e.otheren.length)(d=document.createElement("p")).innerHTML="<span>ഇംഗ്ലീഷ് വാക്കുകള്‍</span> "+e.otheren,i.appendChild(d);if(0!=e.example.length)(s=document.createElement("p")).innerHTML="<span>എടുത്തുകാട്ടല്‍</span> "+e.example,i.appendChild(s);if(0!=e.san.length)(r=document.createElement("p")).innerHTML="<span>സംസ്കൃത മലയാളം</span> "+e.san,i.appendChild(r);function l(){"prefix"===e.type?n.innerHTML=e.ml+"-":"suffix"===e.type&&(n.innerHTML="-"+e.ml)}i.classList.add("pos"),n.innerHTML=e.ml,t.innerHTML=e.type,a.innerHTML="<span>പൊരുള്‍</span> "+e.en,$display.appendChild(n),$display.appendChild(t),$display.appendChild(i),l(),"noun"===t.innerHTML?t.innerHTML="പേര്":"verb"===t.innerHTML?t.innerHTML="വിന":"adjective"===t.innerHTML&&(t.innerHTML="നാമവിശേഷണം")}0===input.value.length&&(input.value="Enter a word!")}),matches=[],$match.style.display="none",input.value="",0===input.value.length&&(input.value="Enter a word!")})}function chillu(){let e=input.value,n=e.includes("ണ്‍"),t=(e.includes("ന്‍"),e.includes("ര്‍"),e.includes("ല്‍"),e.includes("ള്‍"),e.includes("ക്‍"));if(!0===n){let n=e.split("ണ്‍").join("ണ്");input.value=n}else if(!0===t){let n=e.split("ക്‍").join("ക്");input.value=n}}function enterKey(e){13===e.keyCode&&findWords()}input.addEventListener("input",()=>$filter(input.value)),$submit.addEventListener("click",()=>findWords()),input.addEventListener("input",()=>chillu());
